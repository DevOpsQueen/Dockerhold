# Use the official Tomcat 9 image as the base image
FROM tomcat:9-jre8

# Set the environment variables
ENV TOMCAT_USER=admin
ENV TOMCAT_PASSWORD=password
ENV WAR_FILE=ABCTechnologies.war

# Copy the war file to the webapps directory
COPY /var/lib/jenkins/workspace/Test2/Industry\ Grade\ Project\ I\ -\ Java\ Project/ABC\ Technologies/target/${WAR_FILE} /usr/local/tomcat/webapps/

# Add a script to automatically deploy the war file when the container starts
ADD deploy.sh /usr/local/tomcat/bin/
RUN chmod +x /usr/local/tomcat/bin/deploy.sh

# Expose the Tomcat port
EXPOSE 8888

# Start Tomcat and deploy the war file
CMD ["/usr/local/tomcat/bin/deploy.sh"]

